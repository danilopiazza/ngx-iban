sudo: required
dist: trusty
addons:
  apt:
    sources:
    - google-chrome
    packages:
    - google-chrome-stable
language: node_js
node_js:
- '8'
before_script:
- export DISPLAY=:99.0
- sh -e /etc/init.d/xvfb start
- npm install --quiet -g gulp-cli
script: gulp test:ci
before_deploy:
- yarn run start
- gulp build:demo
- cd dist
deploy:
- provider: npm
  skip_cleanup: true
  on:
    tags: true
    repo: mmjmanders/ngx-iban
  email: mmjmanders@gmail.com
  api_key:
    secure: "pdqTz/TbvXC/DYjtWPe4us0vULdJHnBC1EoSASNj2EWkctg3F8X4jw37b1t493jRWrGNnyGGEvrF1iQ49Aj4oh7jHar+u7k89TBJIX9Y+SEJlk354m9RVyox2CKBs+dJNsxevrObXbLsfhDBSjg0lmKLHhsl2dgFGRrdzhlNycimLeRBkyzAcUHrjnRUOFTMWRdAtw16WBoWk7UtPW3PwO0CXfr0Z0WQxxYkZw8NnyE6c90QQ5NssADvNW4pfhe8YBzLMs31EBDD5g8+TR3Pk9OGg+EAtX36cHGCWLwSk1w9ffwELXFyT+LHhrJGEhVrNyZfLTrHC3vCpn/PyK3PdgXqYV4cWLE38n55bce4JrTsq28SEVeAdsyjsB/1OFBTLJh/apWP7T9hoCeWKsB2PLr1MyfzX3mcAHiV9EgHyFFUwY3xWT1QzLJQFT8pcQesQ/lRDwKTvADMvbHr39iVLzm6P+KT6l3DIgXF4Sr6IaiqzalADP13d/dCpwXKRujiKQlz/26jV4pqrTeb/giXZCvO2PT660fIzB0fdkL+oGaeNlCpgGOvo9ygnBQ2Hhbkva88P043213bP6VLF/Wafkm56+lZAlvaEMG9DdnEVAwBiJBH9IugaMrO+hXJjC7iy9ICoNSZwphY4GEcU6t0fZ/9b1VssXQlZaXnXW5IkLA="
    branch: master
  local_dir: demo/dist/browser
after_success: gulp coveralls
cache:
  yarn: true
